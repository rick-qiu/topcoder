<html>
 <head>
  <title>WinningProbability Problem Statement</title>
 </head>
 <body>
  <table>
   <tbody>
    <tr>
     <td colspan="2"><h3><a href="http://community.topcoder.com/stat?c=problem_statement&amp;pm=3069">Problem Statement for WinningProbability</a></h3></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>You favorite sports team is heading into a big playoff series against its big rival. They've gone head to head a number of times previously, and the inputs, <b>prevWins</b> and <b>prevLosses</b>, summarize the results. Now, there are <b>gamesLeft</b> games left in the series, and your team must win at least <b>mustWin</b> of them in order to win the series. You want to know what the probability is that they will accomplish this.<br /><br /><br /><br /> To that end, you've come up with the following strategy. First, you will assume that there is some probability, p, that your team will win each game, and you will assume that each game is independent. For a given value of p, you can thus calculate the probability that your team won and lost as it did in the past. Now, let's say that for a given value of p, p<sub>1</sub>, the probability of the previous games turning out as they did is q<sub>1</sub>, and similarly for p<sub>2</sub>, the probability is q<sub>2</sub>. From this, you've decided that the true probability of your team winning a game is (q<sub>1</sub>/q<sub>2</sub>) times more likely to be p<sub>1</sub> than it is to be p<sub>2</sub>. Considering all possible values of p, and taking into account the relative probabilities of each, determine the probability that your team will win the series.</td>
    </tr>
    <tr>
     <td colspan="2">&nbsp;</td>
    </tr>
    <tr>
     <td colspan="2"><h3>Definition</h3></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>Class:</td>
         <td>WinningProbability</td>
        </tr>
        <tr>
         <td>Method:</td>
         <td>probability</td>
        </tr>
        <tr>
         <td>Parameters:</td>
         <td>int, int, int, int</td>
        </tr>
        <tr>
         <td>Returns:</td>
         <td>double</td>
        </tr>
        <tr>
         <td>Method signature:</td>
         <td>double probability(int prevWins, int prevLosses, int gamesLeft, int mustWin)</td>
        </tr>
        <tr>
         <td colspan="2">(be sure your method is public)</td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
    </tr>
    <tr>
     <td></td>
    </tr>
    <tr>
     <td colspan="2">&nbsp;</td>
    </tr>
    <tr>
     <td colspan="2"><h3>Notes</h3></td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td>Your return must have an error of less than 1e-9.</td>
    </tr>
    <tr>
     <td colspan="2">&nbsp;</td>
    </tr>
    <tr>
     <td colspan="2"><h3>Constraints</h3></td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td><b>prevWins</b> and <b>prevLosses</b> will each be between 0 and 100, inclusive.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td><b>gamesLeft</b> will be between 1 and 15, inclusive.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td><b>mustWin</b> will be between 1 and <b>gamesLeft</b>, inclusive.</td>
    </tr>
    <tr>
     <td colspan="2">&nbsp;</td>
    </tr>
    <tr>
     <td colspan="2"><h3>Examples</h3></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">0)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>2</pre></td>
            </tr>
            <tr>
             <td><pre>0</pre></td>
            </tr>
            <tr>
             <td><pre>1</pre></td>
            </tr>
            <tr>
             <td><pre>1</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: 0.75</pre></td>
        </tr>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td colspan="2">Consider a few illustrative values of p: <pre>
    | prob of  | prob of 
 p  | previous | winning series
----+----------+---------------
0.0 | 0.0      | 0.0
0.1 | 0.01     | 0.1
0.2 | 0.04     | 0.2
0.3 | 0.09     | 0.3
0.4 | 0.16     | 0.4
0.5 | 0.25     | 0.5
0.6 | 0.36     | 0.6
0.7 | 0.49     | 0.7
0.8 | 0.64     | 0.8
0.9 | 0.81     | 0.9
1.0 | 1.0      | 1.0
</pre> So, p is 4 times more likely to be 1.0 than it is to be 0.5, and is definitely not 0. Considering only these values of p, and taking a weighted average, we find that the probability of winning the series is 0.786. Clearly, considering only 11 values of p does not yield the required accuracy, but if you consider all possible values, you find that your team has a probability of 0.75 of winning the series.</td>
            </tr>
           </tbody>
          </table></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">1)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>0</pre></td>
            </tr>
            <tr>
             <td><pre>3</pre></td>
            </tr>
            <tr>
             <td><pre>4</pre></td>
            </tr>
            <tr>
             <td><pre>4</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: 0.0142857142857</pre></td>
        </tr>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td colspan="2">After losing the first 3 games of the ALCS, the Red Sox had a probability of less than 2% of winning the series, according to this model.</td>
            </tr>
           </tbody>
          </table></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">2)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>20</pre></td>
            </tr>
            <tr>
             <td><pre>3</pre></td>
            </tr>
            <tr>
             <td><pre>5</pre></td>
            </tr>
            <tr>
             <td><pre>1</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: 0.9995284409077</pre></td>
        </tr>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td colspan="2">Your team only needs to win 1 out of 5 games, and in the past it has won 20/23, so your odds are high.</td>
            </tr>
           </tbody>
          </table></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">3)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>0</pre></td>
            </tr>
            <tr>
             <td><pre>20</pre></td>
            </tr>
            <tr>
             <td><pre>1</pre></td>
            </tr>
            <tr>
             <td><pre>1</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: 0.0454545454545</pre></td>
        </tr>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td colspan="2">Your team has never won in the past, so its unlikely they will this time.</td>
            </tr>
           </tbody>
          </table></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">4)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>0</pre></td>
            </tr>
            <tr>
             <td><pre>0</pre></td>
            </tr>
            <tr>
             <td><pre>1</pre></td>
            </tr>
            <tr>
             <td><pre>1</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: 0.5</pre></td>
        </tr>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td colspan="2">With no previous games, all values of p are equally likely, and as you would expect, there is a 50% chance that your team will win.</td>
            </tr>
           </tbody>
          </table></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
   </tbody>
  </table>
 </body>
</html>