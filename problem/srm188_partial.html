<html>
 <head>
  <title>Partial Problem Statement</title>
 </head>
 <body>
  <table>
   <tbody>
    <tr>
     <td colspan="2"><h3><a href="http://community.topcoder.com/stat?c=problem_statement&amp;pm=2361">Problem Statement for Partial</a></h3></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td><p> Given a polynomial function of the variables <i>x</i>, <i>y</i>, and <i>z</i>, write a program to compute the mixed partial derivative with respect to a given list of variables. </p> <p> The function will be expressed as a sum of terms. Each term will be a product of factors. Each factor will be either: </p>
      <ul> 
       <li>* an integer coefficient between 2 and 9, inclusive</li> 
       <li>* the variable <i>x</i>, <i>y</i>, or <i>z</i>, optionally raised to an integer power between 2 and 9, inclusive</li> 
      </ul> Each term will contain at least one factor. Multiple factors will be separated by a '*' character. Multiple terms will be separated by a space, a '+' character, and another space. Within a term, there will not be more than one integer coefficient, and there will not be more than one factor with the same variable. However, the factors can be in any order. Examples of terms are: <p></p> <pre>

    7
    x
    3*y
    y*3
    z^5
    z^4*x^9
    3*x*z^5*y
</pre> <p> Examples of functions are: </p> <pre>

    7
    x
    z + 6
    y + y + 2*y
    3 + y^3*2 + z^4*7*x^3
</pre> <p> Given a String of the characters 'x', 'y', and 'z', compute the mixed partial derivative with respect to the variables in the string. To compute a mixed partial derivative, repeatedly take the partial derivative with respect to each variable in the string in turn, using the result of each step as the input to the next. (Incidentally, because we are working with nice polynomial functions, the order in which you compute the partial derivatives does not matter.) </p> <p> To compute a partial derivative: </p> 
      <ul> 
       <li>* The derivative of a sum of terms is equal to the sum of the derivatives of each term.</li> 
       <li>* The derivative of a term with respect to a variable not contained in the term is zero.</li> 
       <li>* The derivative of a term with respect to a variable contained in the term can be computed by multiplying the term by the power of that variable, and then decreasing the power of that variable by 1.</li> 
      </ul> <p> Examples of taking the partial derivatives of functions with respect to <i>y:</i> </p> <pre>

    3                    -&gt;  0
    x^2                  -&gt;  0
    y                    -&gt;  1
    4*y                  -&gt;  4
    2*y^5                -&gt;  10*y^4
    7*y*z^3              -&gt;  7*z^3
    x^2*y^3 + 9*y^4*z^5  -&gt;  3*x^2*y^2 + 36*y^3*z^5
</pre> <p> Your program should return the result as a String, formatted the same way as the input string, with the following additional constraints. Terms with the same powers of all three variables should be combined into a single term, by adding their coefficients. The terms should be sorted with the terms of higher degree (sum of powers of <i>x</i>, <i>y</i>, and <i>z</i>) before terms of lower degree. If two terms have the same degree, output the term with the higher power of <i>x</i> first. If two terms have the same degree and same power of <i>x</i>, output the term with the higher power of <i>y</i> first. Within a term, output the integer coefficient first, followed by the <i>x</i>, <i>y</i>, and <i>z</i> factors, in that order. </p> <p> As with the input String, exponents should only be included only if greater than 1. If as the result of differentiation the power of a variable is reduced to zero, that factor should be omitted. Similarly, integer coefficients of 1 should be omitted. Exception: if a term consists of only the integer coefficient 1, with no <i>x</i>, <i>y</i>, or <i>z</i> factors, that term should be output as &quot;1&quot;. Entire terms reduced to zero should be completely omitted. </p> <p> If the result contains no terms, return the String &quot;0&quot;. </p> </td>
    </tr>
    <tr>
     <td colspan="2">&nbsp;</td>
    </tr>
    <tr>
     <td colspan="2"><h3>Definition</h3></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>Class:</td>
         <td>Partial</td>
        </tr>
        <tr>
         <td>Method:</td>
         <td>derivative</td>
        </tr>
        <tr>
         <td>Parameters:</td>
         <td>String, String</td>
        </tr>
        <tr>
         <td>Returns:</td>
         <td>String</td>
        </tr>
        <tr>
         <td>Method signature:</td>
         <td>String derivative(String expr, String vars)</td>
        </tr>
        <tr>
         <td colspan="2">(be sure your method is public)</td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
    </tr>
    <tr>
     <td></td>
    </tr>
    <tr>
     <td colspan="2">&nbsp;</td>
    </tr>
    <tr>
     <td colspan="2"><h3>Notes</h3></td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td>Pay careful attention to the instructions regarding formatting of the output string.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td>The only spaces in the input and output are immediately before and after all '+' characters.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td>If the <b>vars</b> String is empty, return the given function, subject to the output formatting rules specified in the problem.</td>
    </tr>
    <tr>
     <td colspan="2">&nbsp;</td>
    </tr>
    <tr>
     <td colspan="2"><h3>Constraints</h3></td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td><b>expr</b> will contain between 1 and 50 characters, inclusive.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td><b>vars</b> will contain between 0 and 5 characters, inclusive.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td><b>vars</b> will contain only the characters 'x', 'y', and 'z', in any order, possibly with multiple occurrences of the same character.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td>No term in <b>expr</b> will contain more than one constant factor.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td>No term in <b>expr</b> will contain the same variable more than once.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td><b>expr</b> will be formatted as described in the problem statement.</td>
    </tr>
    <tr>
     <td colspan="2">&nbsp;</td>
    </tr>
    <tr>
     <td colspan="2"><h3>Examples</h3></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">0)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>&quot;7*x&quot;</pre></td>
            </tr>
            <tr>
             <td><pre>&quot;x&quot;</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: &quot;7&quot;</pre></td>
        </tr>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td colspan="2">The derivative of <i>7x</i> with respect to <i>x</i> is 7.</td>
            </tr>
           </tbody>
          </table></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">1)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>&quot;x + z + 9*z^2 + y*z^3&quot;</pre></td>
            </tr>
            <tr>
             <td><pre>&quot;z&quot;</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: &quot;3*y*z^2 + 18*z + 1&quot;</pre></td>
        </tr>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td colspan="2">The partial derivative of <i>x</i> with respect to <i>z</i> is 0, <i>z</i> with respect to <i>z</i> is 1, 9<i>z</i><sup>2</sup> with respect to <i>z</i> is 18<i>z</i>, and <i>yz</i><sup>3</sup> is 3<i>yz</i><sup>2</sup>.</td>
            </tr>
           </tbody>
          </table></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">2)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>&quot;x^2*y^2*z^2&quot;</pre></td>
            </tr>
            <tr>
             <td><pre>&quot;xy&quot;</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: &quot;4*x*y*z^2&quot;</pre></td>
        </tr>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td colspan="2">The partial derivative of <i>x</i><sup>2</sup><i>y</i><sup>2</sup><i>z</i><sup>2</sup> with respect to <i>x</i> is 2<i>x</i><i>y</i><sup>2</sup><i>z</i><sup>2</sup>. The partial derivative of 2<i>x</i><i>y</i><sup>2</sup><i>z</i><sup>2</sup> with respect to <i>y</i> is 4<i>x</i><i>y</i><i>z</i><sup>2</sup>.</td>
            </tr>
           </tbody>
          </table></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">3)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>&quot;y*8*z*x^3 + x^5 + y*2*x^4 + 9*x^4*z + x^5*5&quot;</pre></td>
            </tr>
            <tr>
             <td><pre>&quot;&quot;</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: &quot;6*x^5 + 2*x^4*y + 9*x^4*z + 8*x^3*y*z&quot;</pre></td>
        </tr>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td colspan="2">Variables and constant factors can appear in any order in the input. The vars string can be empty. Terms must be sorted in the correct order. Terms with equal powers of all variables must be added together. </td>
            </tr>
           </tbody>
          </table></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">4)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>&quot;9*x^9*y^9*z^9 + x^2*y^2*z^2&quot;</pre></td>
            </tr>
            <tr>
             <td><pre>&quot;xyzzy&quot;</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: &quot;419904*x^8*y^7*z^7 + 8*x&quot;</pre></td>
        </tr>
        <tr>
         <td></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">5)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>&quot;x + y + z&quot;</pre></td>
            </tr>
            <tr>
             <td><pre>&quot;yy&quot;</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: &quot;0&quot;</pre></td>
        </tr>
        <tr>
         <td></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">6)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>&quot;9*x^9 + 9*x^9 + 9*x^9 + 9*x^9 + 9*x^9 + 9*x^9&quot;</pre></td>
            </tr>
            <tr>
             <td><pre>&quot;&quot;</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: &quot;54*x^9&quot;</pre></td>
        </tr>
        <tr>
         <td></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
   </tbody>
  </table>
 </body>
</html>