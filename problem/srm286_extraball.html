<html>
 <head>
  <title>ExtraBall Problem Statement</title>
 </head>
 <body>
  <table>
   <tbody>
    <tr>
     <td colspan="2"><h3><a href="http://community.topcoder.com/stat?c=problem_statement&amp;pm=5891">Problem Statement for ExtraBall</a></h3></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td><p> In a Bingo game, players have cards bearing a random selection of numbers ranging from 1 to 75. During the game, a blower containing exactly one ball for each of these numbers releases balls one at a time, without replacement, until a certain number of balls have been released. After each ball is released, the players will mark the cells on their cards that match the number on the ball. A player's objective in this game is to win prizes by matching the markings on his card with one or more predesignated patterns. Each pattern consists of the same number of cells as a card, and each cell in a pattern is either a <tt>'X'</tt> or a <tt>'.'</tt>. A pattern is considered matched when all the cells on a card corresponding to its <tt>'X'</tt>s are marked. At the end of the game, each player wins all of the prizes corresponding to all the patterns matched by his card. For example, consider a card with four cells containing the numbers [1,10,2,3]. The winning patterns are given as <tt>&quot;X...&quot;</tt>, <tt>&quot;X..X&quot;</tt>, and <tt>&quot;XXXX&quot;</tt>. If the balls released in a given game were 1, 2, 3, 4, and 5, you would mark the cells on the card containing the numbers 1, 2, and 3. The following two patterns would be matched by the card: </p>
      <ul> 
       <li> <tt>&quot;X...&quot;</tt>, which represents a pattern that requires the first cell to be marked.</li> 
       <li> <tt>&quot;X..X&quot;</tt>, a pattern that requires the cells at both ends of the card to be marked.</li> 
      </ul> The card would not match the pattern <tt>&quot;XXXX&quot;</tt> because the second cell is not marked. <p></p> <p> At the end of the game, one additional ball is released to give players a chance to win additional prizes. Determine the expected increase in your payout after this new ball is released. In other words, determine the expected payout of the patterns matched by the new ball, excluding all the patterns that were already matched before the new ball was released. In the example given above, there is a probability of 1/70 that the pattern <tt>&quot;XXXX&quot;</tt> will be matched after the additional ball is released (the additional ball would have to be 10). The expected increase in payout would therefore be 1/70 times the payout associated with that pattern. </p> <p> You are given a int[] <b>card</b> containing the numbers on your card, and a int[] <b>balls</b> containing the sequence of balls that have already been released from the blower. You are also given a String[] <b>patterns</b> and a int[] <b>prizes</b>. The i-th element of <b>prizes</b> is the payout corresponding to the i-th element of <b>patterns</b>. As described above, one additional ball will be released from the blower. Return the expected increase in your payout after the new ball is released. </p></td>
    </tr>
    <tr>
     <td colspan="2">&nbsp;</td>
    </tr>
    <tr>
     <td colspan="2"><h3>Definition</h3></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>Class:</td>
         <td>ExtraBall</td>
        </tr>
        <tr>
         <td>Method:</td>
         <td>expectedPayout</td>
        </tr>
        <tr>
         <td>Parameters:</td>
         <td>int[], int[], String[], int[]</td>
        </tr>
        <tr>
         <td>Returns:</td>
         <td>double</td>
        </tr>
        <tr>
         <td>Method signature:</td>
         <td>double expectedPayout(int[] card, int[] balls, String[] patterns, int[] prizes)</td>
        </tr>
        <tr>
         <td colspan="2">(be sure your method is public)</td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
    </tr>
    <tr>
     <td></td>
    </tr>
    <tr>
     <td colspan="2">&nbsp;</td>
    </tr>
    <tr>
     <td colspan="2"><h3>Notes</h3></td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td>All available balls have the same probability of being released.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td>Your return value must have a relative or absolute error less than 1e-9.</td>
    </tr>
    <tr>
     <td colspan="2">&nbsp;</td>
    </tr>
    <tr>
     <td colspan="2"><h3>Constraints</h3></td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td><b>card</b> will contain between 1 and 25 elements, inclusive.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td><b>balls</b> will contain between 1 and 40 elements, inclusive.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td>Each element of <b>card</b> and <b>balls</b> will be between 1 and 75, inclusive.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td>No two elements of <b>card</b> will be equal.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td>No two elements of <b>balls</b> will be equal.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td><b>patterns</b> will contain between 1 and 50 elements, inclusive.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td><b>prizes</b> and <b>patterns</b> will contain the same number of elements.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td>The number of characters in each element of <b>patterns</b> will be equal to the number of elements in <b>card</b>.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td>Each element of <b>patterns</b> will contain only uppercase <tt>'X'</tt> and <tt>'.'</tt> characters.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td>Each element of <b>patterns</b> will contain at least one <tt>'X'</tt> character.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td>Each element of <b>prizes</b> will be between 1 and 10000, inclusive.</td>
    </tr>
    <tr>
     <td colspan="2">&nbsp;</td>
    </tr>
    <tr>
     <td colspan="2"><h3>Examples</h3></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">0)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>{1,2,3}</pre></td>
            </tr>
            <tr>
             <td><pre>{1,2,4}</pre></td>
            </tr>
            <tr>
             <td><pre>{&quot;XXX&quot;}</pre></td>
            </tr>
            <tr>
             <td><pre>{10000}</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: 138.88888888888889</pre></td>
        </tr>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td colspan="2">The full card pays a 10,000 jackpot. One of the 72 remaining balls will complete the pattern, thus (1/72)*10000 = 138.888888888 is the expected payout value.</td>
            </tr>
           </tbody>
          </table></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">1)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>{1,2,3,4,5}</pre></td>
            </tr>
            <tr>
             <td><pre>{6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26}</pre></td>
            </tr>
            <tr>
             <td><pre>{&quot;X.X.X&quot;}</pre></td>
            </tr>
            <tr>
             <td><pre>{10}</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: 0.0</pre></td>
        </tr>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td colspan="2">Three balls (1, 3, and 5) are needed to get the prize, but since only one additional ball is released, the prize cannot be won.</td>
            </tr>
           </tbody>
          </table></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">2)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>{29,16,2,35,75}</pre></td>
            </tr>
            <tr>
             <td><pre>{75,4,16,3,21,44,2,38,11}</pre></td>
            </tr>
            <tr>
             <td><pre>{&quot;X....&quot;,&quot;X.X.X&quot;,&quot;XXX..&quot;,&quot;XXXXX&quot;}</pre></td>
            </tr>
            <tr>
             <td><pre>{10,100,300,1000}</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: 6.212121212121213</pre></td>
        </tr>
        <tr>
         <td></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">3)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>{1,2,3,4,5,6,7,8,9,10}</pre></td>
            </tr>
            <tr>
             <td><pre>{75}</pre></td>
            </tr>
            <tr>
             <td><pre>{&quot;X.........&quot;,&quot;.X........&quot;,&quot;..X.......&quot;,&quot;...X......&quot;,&quot;....X.....&quot;,&quot;XXXXXXXXXX&quot;}</pre></td>
            </tr>
            <tr>
             <td><pre>{50,40,30,20,10,1000}</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: 2.027027027027027</pre></td>
        </tr>
        <tr>
         <td></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">4)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>{1,2,3,4}</pre></td>
            </tr>
            <tr>
             <td><pre>{12,34,45,56,67,1,2,3,4}</pre></td>
            </tr>
            <tr>
             <td><pre>{&quot;X..X&quot;,&quot;XXXX&quot;}</pre></td>
            </tr>
            <tr>
             <td><pre>{10,100}</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: 0.0</pre></td>
        </tr>
        <tr>
         <td></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
   </tbody>
  </table>
 </body>
</html>