<html>
 <head>
  <title>CountryWar Problem Statement</title>
 </head>
 <body>
  <table>
   <tbody>
    <tr>
     <td colspan="2"><h3><a href="http://community.topcoder.com/stat?c=problem_statement&amp;pm=6068">Problem Statement for CountryWar</a></h3></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td><p>Your country has several army units. There are several other countries, each of which is considered to be either an enemy or neutral, and each of which has several army units of its own.</p> <p>A war consists of a series of battles. Once you initiate war with a neighboring country, war will proceed until either country has no remaining army units. After defeating another country in war, you own their territory. That is, their territory is added to yours forming one new larger territory. You can only initiate war with a country that borders some part of the territory you already own.</p> <p>In any single round of battle, exactly one of the two countries involved will lose an army unit. If country A attacks country B, where A and B have <i>a</i> and <i>b</i> army units, respectively, then the probability that B will lose an army unit during the battle is <i>a</i><sup>2</sup>/(<i>a</i><sup>2</sup>+<i>a</i>*<i>b</i>+<i>b</i><sup>2</sup>), otherwise A will lose an army unit. Note that <i>a</i> and <i>b</i> correspond to the total number of units in countries A and B, respectively.</p> <p>Your goal is to defeat all of the enemy nations. While it is not required that you defeat any of the neutral nations, doing so may be necessary in order to reach other enemy countries (see examples 2 and 3).</p> <p>You are given a String[] <b>armies</b>, describing each country. Each element of <b>armies</b> is formatted as &quot;<i>type</i> <i>units</i> <i>borders</i>&quot; (quotes added for clarity). <i>type</i> is one of 'Y', 'E' or 'N', indicating if the country is yours, an enemy, or neutral. <i>units</i> is an integer indicating how many army units are held by that country. <i>borders</i> is a space delimited list of zero or more integers, indicating the zero-based indices of adjacent countries.</p> <p>You are to return a double indicating the probability that you can defeat all of your enemy nations without all of your army units being lost, assuming that you choose your order of attack optimally.</p></td>
    </tr>
    <tr>
     <td colspan="2">&nbsp;</td>
    </tr>
    <tr>
     <td colspan="2"><h3>Definition</h3></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>Class:</td>
         <td>CountryWar</td>
        </tr>
        <tr>
         <td>Method:</td>
         <td>defeatAll</td>
        </tr>
        <tr>
         <td>Parameters:</td>
         <td>String[]</td>
        </tr>
        <tr>
         <td>Returns:</td>
         <td>double</td>
        </tr>
        <tr>
         <td>Method signature:</td>
         <td>double defeatAll(String[] armies)</td>
        </tr>
        <tr>
         <td colspan="2">(be sure your method is public)</td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
    </tr>
    <tr>
     <td></td>
    </tr>
    <tr>
     <td colspan="2">&nbsp;</td>
    </tr>
    <tr>
     <td colspan="2"><h3>Notes</h3></td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td>The graph described by the bordering countries does not necessarily represent a planar graph.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td>The graph described by the countries is not necessarily a connected graph (see example 5).</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td>Return value must be within 1e-9 absolute or relative error of the actual result.</td>
    </tr>
    <tr>
     <td colspan="2">&nbsp;</td>
    </tr>
    <tr>
     <td colspan="2"><h3>Constraints</h3></td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td><b>armies</b> will contain between 1 and 15 elements, inclusive.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td>Each element of <b>armies</b> will be formatted as &quot;<i>type</i> <i>units</i> <i>borders</i>&quot; (quotes added for clarity).</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td>Each <i>type</i> will be 'Y', 'E' or 'N'.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td>Exactly one element of <b>armies</b> will be of type 'Y'.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td>Each <i>units</i> will be an integer between 1 and 20, inclusive, with no leading zeros.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td>Each number represented in <i>borders</i> will be an integer with no leading zeros, between 0 and <i>n</i>-1, inclusive, where <i>n</i> is the number of elements in <b>armies</b>.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td>Within a single element of <b>armies</b>, the numbers represented in <i>borders</i> will contain no duplicates.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td>The borders described will be symmetric (that is, if a borders b, then b borders a).</td>
    </tr>
    <tr>
     <td colspan="2">&nbsp;</td>
    </tr>
    <tr>
     <td colspan="2"><h3>Examples</h3></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">0)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>{&quot;Y 1 1&quot;,
 &quot;E 1 0&quot;}</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: 0.3333333333333333</pre></td>
        </tr>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td colspan="2">Here, you and your enemy each have exactly one army. Using the formula, 1<sup>2</sup> / (1<sup>2</sup> + 1*1 + 1<sup>2</sup>) = 1/3.</td>
            </tr>
           </tbody>
          </table></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">1)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>{&quot;Y 2 1&quot;,
 &quot;E 1 0&quot;}</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: 0.7142857142857142</pre></td>
        </tr>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td colspan="2">Here, superior strength is an advantage. In the first round of battle, there is a 4/7 chance of our enemy losing his only army. In the 3/7 chance that we get to a second round of battle, there is a 1/3 chance of winning. Thus, our total chances of winning are 4/7 + 3/7 * 1/3 = 5/7.</td>
            </tr>
           </tbody>
          </table></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">2)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>{&quot;Y 1 1&quot;,
 &quot;E 1 0 2&quot;,
 &quot;N 1 1&quot;}</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: 0.3333333333333333</pre></td>
        </tr>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td colspan="2">Our first battle is against our enemy, which we have a 1/3 chance of winning. Since we are not required to defeat neutral countries, we do not need to continue after that.</td>
            </tr>
           </tbody>
          </table></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">3)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>{&quot;Y 1 1&quot;,
 &quot;N 1 0 2&quot;,
 &quot;E 1 1&quot;}</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: 0.1111111111111111</pre></td>
        </tr>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td colspan="2">Here, we again have three countries lined up in a row, but this time, we are forced to first attack the neutral country, so that we can get to the enemy. We have a 1/3 chance of winning each war, thus a 1/9 chance of successfully completing both.</td>
            </tr>
           </tbody>
          </table></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">4)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>{&quot;Y 2 1 2&quot;,
 &quot;E 2 0 2&quot;,
 &quot;E 1 0 1&quot;}</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: 0.16250944822373392</pre></td>
        </tr>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td colspan="2">There are two enemy nations to attack, so our task is to determine which order of attack is optimal.</td>
            </tr>
           </tbody>
          </table></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">5)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>{&quot;Y 1&quot;,
 &quot;E 1&quot;}</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: 0.0</pre></td>
        </tr>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td colspan="2">There is no path connecting you with your enemy, therefore you cannot possibly attack (or defeat) them.</td>
            </tr>
           </tbody>
          </table></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">6)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>{&quot;Y 1&quot;}</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: 1.0</pre></td>
        </tr>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td colspan="2">There is only you, and nobody to defeat, so you're guaranteed to be successful.</td>
            </tr>
           </tbody>
          </table></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
   </tbody>
  </table>
 </body>
</html>