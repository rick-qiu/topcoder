<html>
 <head>
  <title>DrawingLines Problem Statement</title>
 </head>
 <body>
  <table>
   <tbody>
    <tr>
     <td colspan="2"><h3><a href="http://community.topcoder.com/stat?c=problem_statement&amp;pm=10735">Problem Statement for DrawingLines</a></h3></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td><i>NOTE: This problem statement contains images that may not display properly if viewed outside of the applet.</i> <br /><br /> <br /><br /> Little John has drawn a rectangle. On the top edge, he draws <b>n</b> dots at different places and numbers them 1 through <b>n</b> from left to right. On the bottom edge, he also draws <b>n</b> dots at different places and numbers them 1 through <b>n</b> from left to right. <br /><br /> <br /><br /> John will then draw <b>n</b> straight line segments. For each segment, he will first choose a dot on the top edge that has not been chosen earlier. Then, he will choose a dot on the bottom edge that has not been chosen earlier. Finally, he will connect those two dots to form a straight line segment. <br /><br /> <br /><br /> John has drawn several of the <b>n</b> segments so far. You are given int[]s <b>startDot</b> and <b>endDot</b>. <b>startDot</b>[i] is the number of the top dot chosen for the i-th segment which has already been drawn, and <b>endDot</b>[i] is the number of the bottom dot chosen for that segment. For each remaining segment, John will randomly choose an available top dot and an available bottom dot (each available top dot has an equal probability of being chosen, and each available bottom dot has an equal probability of being chosen). Return the expected number of distinct pairs of line segments that cross each other in the final drawing.</td>
    </tr>
    <tr>
     <td colspan="2">&nbsp;</td>
    </tr>
    <tr>
     <td colspan="2"><h3>Definition</h3></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>Class:</td>
         <td>DrawingLines</td>
        </tr>
        <tr>
         <td>Method:</td>
         <td>countLineCrossings</td>
        </tr>
        <tr>
         <td>Parameters:</td>
         <td>int, int[], int[]</td>
        </tr>
        <tr>
         <td>Returns:</td>
         <td>double</td>
        </tr>
        <tr>
         <td>Method signature:</td>
         <td>double countLineCrossings(int n, int[] startDot, int[] endDot)</td>
        </tr>
        <tr>
         <td colspan="2">(be sure your method is public)</td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
    </tr>
    <tr>
     <td></td>
    </tr>
    <tr>
     <td colspan="2">&nbsp;</td>
    </tr>
    <tr>
     <td colspan="2"><h3>Notes</h3></td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td>The returned value must have an absolute or relative error less than 1e-9.</td>
    </tr>
    <tr>
     <td colspan="2">&nbsp;</td>
    </tr>
    <tr>
     <td colspan="2"><h3>Constraints</h3></td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td><b>n</b> will be between 2 and 10000, inclusive.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td><b>startDot</b> and <b>endDot</b> will each contain between 1 and 50 elements, inclusive.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td><b>startDot</b> and <b>endDot</b> will contain the same number of elements.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td><b>startDot</b> and <b>endDot</b> will each contain less than <b>n</b> elements.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td>Each element of <b>startDot</b> will be between 1 and <b>n</b>, inclusive.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td>Each element of <b>endDot</b> will be between 1 and <b>n</b>, inclusive.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td>All elements of <b>startDot</b> will be distinct.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td>All elements of <b>endDot</b> will be distinct.</td>
    </tr>
    <tr>
     <td colspan="2">&nbsp;</td>
    </tr>
    <tr>
     <td colspan="2"><h3>Examples</h3></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">0)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>3</pre></td>
            </tr>
            <tr>
             <td><pre>{2}</pre></td>
            </tr>
            <tr>
             <td><pre>{3}</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: 1.5</pre></td>
        </tr>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td colspan="2">There are four possible ways for Little John to pick the dots : 
              <ul> 
               <li>[Top 1]-[Bottom 1] [Top 3]-[Bottom 2]</li> 
               <li>[Top 1]-[Bottom 2] [Top 3]-[Bottom 1]</li> 
               <li>[Top 3]-[Bottom 1] [Top 1]-[Bottom 2]</li> 
               <li>[Top 3]-[Bottom 2] [Top 1]-[Bottom 1]</li> 
              </ul> <img src="http://www.topcoder.com/contest/problem/DrawingLines/drawinglinesnew.png" /> <br /><br /> The first and the fourth ways correspond to the left picture, while the second and the third ways correspond to the right picture. The blue line is the line initially drawn by Little John. <br /><br /> In the left configuration, there is 1 pair of segments that cross each other. In the right configuration, there are 2 pairs of segments that cross each other. Hence, the expected number of crossed pairs is 1.5.</td>
            </tr>
           </tbody>
          </table></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">1)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>5</pre></td>
            </tr>
            <tr>
             <td><pre>{1,4}</pre></td>
            </tr>
            <tr>
             <td><pre>{3,1}</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: 5.5</pre></td>
        </tr>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td colspan="2"></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">2)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>4</pre></td>
            </tr>
            <tr>
             <td><pre>{4,1}</pre></td>
            </tr>
            <tr>
             <td><pre>{4,1}</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: 0.5</pre></td>
        </tr>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td colspan="2"></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">3)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>8</pre></td>
            </tr>
            <tr>
             <td><pre>{1,4,3,6,7}</pre></td>
            </tr>
            <tr>
             <td><pre>{1,3,2,4,5}</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: 7.5</pre></td>
        </tr>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td colspan="2"></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
   </tbody>
  </table>
 </body>
</html>