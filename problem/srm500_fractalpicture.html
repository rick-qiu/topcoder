<html>
 <head>
  <title>FractalPicture Problem Statement</title>
 </head>
 <body>
  <table>
   <tbody>
    <tr>
     <td colspan="2"><h3><a href="http://community.topcoder.com/stat?c=problem_statement&amp;pm=11344">Problem Statement for FractalPicture</a></h3></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>Nick likes to draw fractals. For the special occasion of Single Round Match 500, he decided to draw the 500th generation of his favorite fractal. <br /><br /><br /><br /> Each generation of the fractal can be described as a set of segments on the plane. Some of these segments are called <i>final</i> and all other are considered to be <i>non-final</i>. In each non-final segment, one of its endpoints is chosen and called the <i>root</i> of this segment. In pictures below, solid and dotted lines are used to represent final and non-final segments, correspondingly. <br /><br /><br /><br /> The first generation consists of one segment with endpoints (0, 0) and (0, 81). This segment is non-final and its root is (0, 0). <br /><br /><br /><br /> <img src="http://www.topcoder.com/contest/problem/FractalPicture/pic1.gif" /> <br /><br /><br /><br /> The i-th generation, i &gt;= 2, is produced from the (i-1)-th generation as follows. All final segments from the (i-1)-th generation are included into the i-th generation without any changes. For each non-final segment from the (i-1)-th generation, let A and B be its endpoints, with A being its root. The following steps are then done: 
      <ul> 
       <li>The point C is drawn on the segment AB so that the length of segment AC is twice as large as the length of segment BC.</li> 
       <li>Segment CD is drawn as the rotation of segment CB around point C by 90 degrees clockwise.</li> 
       <li>Segment CE is drawn as the rotation of segment CB around point C by 90 degress counter-clockwise.</li> 
       <li>Segment AC is included in the i-th generation as a final segment.</li> 
       <li>Segments CB, CD and CE are included in the i-th generation as non-final segments. The root of each of these three segments is point C.</li> 
      </ul> The second and third generations of this fractal are shown on the picture below. <br /><br /><br /><br /> <img src="http://www.topcoder.com/contest/problem/FractalPicture/pic22.gif" /> &nbsp; <img src="http://www.topcoder.com/contest/problem/FractalPicture/pic3.gif" /> <br /><br /><br /><br /> Consider a rectangle R on the plane that consists of points (x, y), such that <b>x1</b> &lt;= x &lt;= <b>x2</b> and <b>y1</b> &lt;= y &lt;= <b>y2</b>. Let S be the set of all segments of the 500-th generation of the fractal described above (both final and non-final ones). Return the total length of all parts of segments from S that belong to rectangle R.</td>
    </tr>
    <tr>
     <td colspan="2">&nbsp;</td>
    </tr>
    <tr>
     <td colspan="2"><h3>Definition</h3></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>Class:</td>
         <td>FractalPicture</td>
        </tr>
        <tr>
         <td>Method:</td>
         <td>getLength</td>
        </tr>
        <tr>
         <td>Parameters:</td>
         <td>int, int, int, int</td>
        </tr>
        <tr>
         <td>Returns:</td>
         <td>double</td>
        </tr>
        <tr>
         <td>Method signature:</td>
         <td>double getLength(int x1, int y1, int x2, int y2)</td>
        </tr>
        <tr>
         <td colspan="2">(be sure your method is public)</td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
    </tr>
    <tr>
     <td></td>
    </tr>
    <tr>
     <td colspan="2">&nbsp;</td>
    </tr>
    <tr>
     <td colspan="2"><h3>Notes</h3></td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td>The returned value must have an absolute or relative error less than 1e-9.</td>
    </tr>
    <tr>
     <td colspan="2">&nbsp;</td>
    </tr>
    <tr>
     <td colspan="2"><h3>Constraints</h3></td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td><b>x1</b> will be between -100 and 100, inclusive.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td><b>x2</b> will be between <b>x1</b>+1 and 100, inclusive.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td><b>y1</b> will be between -100 and 100, inclusive.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td><b>y2</b> will be between <b>y1</b>+1 and 100, inclusive.</td>
    </tr>
    <tr>
     <td colspan="2">&nbsp;</td>
    </tr>
    <tr>
     <td colspan="2"><h3>Examples</h3></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">0)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>-1</pre></td>
            </tr>
            <tr>
             <td><pre>0</pre></td>
            </tr>
            <tr>
             <td><pre>1</pre></td>
            </tr>
            <tr>
             <td><pre>53</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: 53.0</pre></td>
        </tr>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td colspan="2">Only one part of fractal segments belongs to this rectangle: (0, 0) - (0, 53).</td>
            </tr>
           </tbody>
          </table></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">1)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>1</pre></td>
            </tr>
            <tr>
             <td><pre>1</pre></td>
            </tr>
            <tr>
             <td><pre>10</pre></td>
            </tr>
            <tr>
             <td><pre>10</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: 0.0</pre></td>
        </tr>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td colspan="2">No parts of fractal segments belong to this rectangle.</td>
            </tr>
           </tbody>
          </table></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">2)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>-10</pre></td>
            </tr>
            <tr>
             <td><pre>54</pre></td>
            </tr>
            <tr>
             <td><pre>10</pre></td>
            </tr>
            <tr>
             <td><pre>55</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: 21.0</pre></td>
        </tr>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td colspan="2">Two parts of fractal segments belong to this rectangle: (-10, 54) - (10, 54) and (0, 54) - (0, 55). Note that parts that lie on the rectangle's border also belong to the rectangle.</td>
            </tr>
           </tbody>
          </table></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">3)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>14</pre></td>
            </tr>
            <tr>
             <td><pre>45</pre></td>
            </tr>
            <tr>
             <td><pre>22</pre></td>
            </tr>
            <tr>
             <td><pre>54</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: 2999.0</pre></td>
        </tr>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td colspan="2"></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
   </tbody>
  </table>
 </body>
</html>