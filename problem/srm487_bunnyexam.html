<html>
 <head>
  <title>BunnyExam Problem Statement</title>
 </head>
 <body>
  <table>
   <tbody>
    <tr>
     <td colspan="2"><h3><a href="http://community.topcoder.com/stat?c=problem_statement&amp;pm=11011">Problem Statement for BunnyExam</a></h3></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>Bunnies like programming and they sometimes make useful devices. <br /><br /> <br /><br /> One group of bunnies made a device called RandomAnswerer for their final exam. They cannot solve any of the problems, so they will try to answer the questions randomly. <br /><br /> <br /><br /> There are <b>m</b> problems numbered 1 through <b>m</b>. The answer for each problem will be one of the integers between 1 and <b>k</b>, inclusive. We also know the following: 
      <ul> 
       <li>The answer to problem x is <i>different</i> from that of problem x + 1, where 1 &lt;= x &lt; <b>m</b>. </li> 
       <li>We have a int[] <b>linkage</b> containing N * 2 elements. For each i, where 0 &lt;= i &lt; N, the answer to problem <b>linkage</b>[i * 2] is the <i>same</i> as that of <b>linkage</b>[i * 2 + 1]. Note that all elements in <b>linkage</b> are distinct. </li> 
      </ul> RandomAnswerer makes a sequence of <b>m</b> answers and shows it to the bunnies. Both the sequence produced by RandomAnswerer and the sequence of correct answers are chosen among all possible sequences of <b>m</b> answers that agree with the information above, randomly (all of them have the same probability of being chosen) and independently. Return the expected number of correct answers bunnies get. If there is any contradiction in the information, i.e., there are no sequences of answers that agree with all of it, return -1.0 instead. </td>
    </tr>
    <tr>
     <td colspan="2">&nbsp;</td>
    </tr>
    <tr>
     <td colspan="2"><h3>Definition</h3></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>Class:</td>
         <td>BunnyExam</td>
        </tr>
        <tr>
         <td>Method:</td>
         <td>getExpected</td>
        </tr>
        <tr>
         <td>Parameters:</td>
         <td>int, int, int[]</td>
        </tr>
        <tr>
         <td>Returns:</td>
         <td>double</td>
        </tr>
        <tr>
         <td>Method signature:</td>
         <td>double getExpected(int m, int k, int[] linkage)</td>
        </tr>
        <tr>
         <td colspan="2">(be sure your method is public)</td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
    </tr>
    <tr>
     <td></td>
    </tr>
    <tr>
     <td colspan="2">&nbsp;</td>
    </tr>
    <tr>
     <td colspan="2"><h3>Notes</h3></td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td>The returned value must have an absolute or relative error less than 1e-9. </td>
    </tr>
    <tr>
     <td colspan="2">&nbsp;</td>
    </tr>
    <tr>
     <td colspan="2"><h3>Constraints</h3></td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td><b>m</b> and <b>k</b> will each be between 1 and 1,000,000,000, inclusive. </td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td><b>linkage</b> will contain between 0 and 20 elements, inclusive. </td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td><b>linkage</b> will contain an even number of elements. </td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td>Each element of <b>linkage</b> will be between 1 and <b>m</b>, inclusive. </td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td>All elements of <b>linkage</b> will be distinct. </td>
    </tr>
    <tr>
     <td colspan="2">&nbsp;</td>
    </tr>
    <tr>
     <td colspan="2"><h3>Examples</h3></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">0)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>3</pre></td>
            </tr>
            <tr>
             <td><pre>2</pre></td>
            </tr>
            <tr>
             <td><pre>{ 1, 3 }</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: 1.5</pre></td>
        </tr>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td colspan="2">Here problems 1 and 2 have different answers, problems 2 and 3 have different answers and problems 1 and 3 have the same answer. <br /><br /> The answers will be either (1, 2, 1) or (2, 1, 2), so the number of correct answers bunnies get will be 3 or 0 with equal probability. </td>
            </tr>
           </tbody>
          </table></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">1)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>4</pre></td>
            </tr>
            <tr>
             <td><pre>2</pre></td>
            </tr>
            <tr>
             <td><pre>{ 1, 4 }</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: -1.0</pre></td>
        </tr>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td colspan="2">This is impossible. </td>
            </tr>
           </tbody>
          </table></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">2)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>2</pre></td>
            </tr>
            <tr>
             <td><pre>8</pre></td>
            </tr>
            <tr>
             <td><pre>{ }</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: 0.25</pre></td>
        </tr>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td colspan="2"><b>linkage</b> may be empty. </td>
            </tr>
           </tbody>
          </table></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">3)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>1000000000</pre></td>
            </tr>
            <tr>
             <td><pre>1</pre></td>
            </tr>
            <tr>
             <td><pre>{ 11, 13, 2010, 487 }</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: -1.0</pre></td>
        </tr>
        <tr>
         <td></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">4)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>128</pre></td>
            </tr>
            <tr>
             <td><pre>64</pre></td>
            </tr>
            <tr>
             <td><pre>{ 32, 16, 8, 4, 2, 1 }
</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: -1.0</pre></td>
        </tr>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td colspan="2"></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">5)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>13</pre></td>
            </tr>
            <tr>
             <td><pre>3</pre></td>
            </tr>
            <tr>
             <td><pre>{ 1, 3, 7, 9, 13, 10, 6, 2  }
</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: 4.333333333333333</pre></td>
        </tr>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td colspan="2"></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
   </tbody>
  </table>
 </body>
</html>