<html>
 <head>
  <title>MetroNetwork Problem Statement</title>
 </head>
 <body>
  <table>
   <tbody>
    <tr>
     <td colspan="2"><h3><a href="http://community.topcoder.com/stat?c=problem_statement&amp;pm=7541">Problem Statement for MetroNetwork</a></h3></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>You live in a big city and need to travel to work every day using the metro rail network. However, the railway lines aren't 100% reliable and occasionally problems with the track lead to a line having to run much slower than usual. You've been in the city for a while, so you know the approximate probabilities of delays happening on each of the lines. Your task is to develop a strategy that minimizes the expected time to get from your starting point to your destination. <br /><br /><br /><br /> When setting out on your journey, you have no way of telling which lines are delayed. Fortunately, the rail company posts information about delayed lines at the stations. However, they are not very good at communicating between stations, so each station will only have information posted about the train lines that pass through that particular station. You will therefore find out whether a line is delayed the first time you arrive in a station through which that line passes. Note that you have to be in the station to read the notice, so you don't gain information about delays by passing through a station on a train without disembarking. If a line is delayed, then the amount of time for the trains to run between adjacent stations on that line is increased by an amount <b>delay</b>. Getting on and off trains also takes a certain amount of time. You may assume that the lines which are delayed do not change throughout the course of the entire journey. Trains run in both directions on all lines, with the journey time being the same in both directions, but to change direction, you have to disembark and reboard. Assume that a delay affects trains in both directions. <br /><br /><br /><br /> Each line is given as the order of stations that the train visits on that line. A line may pass through a station multiple times, but these intersections are not joined. For example, if a train visits stations 0 1 2 3 4 5 2 6 7 in that order and you are at station 0 wishing to get to station 7, you have two options: visit all the stations on the line, or disembark at station 2 and reboard a different train at the later point on the line where it passes through station 2 again. There is no train that visits stations 0 1 2 6 7 without going through stations 3 4 5. <br /><br /><br /><br /> You will be given a String[] <b>lines</b>, where each element will contain a space-separated list of integers representing the stations that the a single line passes through in order, with the j<sup>th</sup> integer in the i<sup>th</sup> element being the number of the j<sup>th</sup> station on that line. The time that the trains take between each station will be described as a space-separated list of integers in a String[] <b>times</b>. The i<sup>th</sup> element of <b>times</b> describes the i<sup>th</sup> line in <b>lines</b>, with the j<sup>th</sup> integer being the time to travel between the j<sup>th</sup> and j+1<sup>th</sup> stations on the line. The probability of each line being delayed is given as a percentage in <b>probabilities</b> in the same order as <b>lines</b>. The time to catch or disembark a train is <b>changeTime</b> and the additional time to travel between adjacent stations if a line is delayed is <b>delay</b>. <br /><br /><br /><br /> You should work out the minimum expected journey time to get from station <b>start</b> to station <b>destination</b> and return this time. Return -1.0 if it is not possible to reach station <b>destination</b> from station <b>start</b>.</td>
    </tr>
    <tr>
     <td colspan="2">&nbsp;</td>
    </tr>
    <tr>
     <td colspan="2"><h3>Definition</h3></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>Class:</td>
         <td>MetroNetwork</td>
        </tr>
        <tr>
         <td>Method:</td>
         <td>minimizeTime</td>
        </tr>
        <tr>
         <td>Parameters:</td>
         <td>int, int, String[], String[], int[], int, int</td>
        </tr>
        <tr>
         <td>Returns:</td>
         <td>double</td>
        </tr>
        <tr>
         <td>Method signature:</td>
         <td>double minimizeTime(int start, int destination, String[] lines, String[] times, int[] probabilities, int changeTime, int delay)</td>
        </tr>
        <tr>
         <td colspan="2">(be sure your method is public)</td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
    </tr>
    <tr>
     <td></td>
    </tr>
    <tr>
     <td colspan="2">&nbsp;</td>
    </tr>
    <tr>
     <td colspan="2"><h3>Notes</h3></td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td>The return value must be accurate to within an absolute or relative tolerance of 1e-9.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td><b>changeTime</b> includes the time you spend waiting for trains.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td>It takes <b>changeTime</b> time to board a train and <b>changeTime</b> time to disembark. For a single journey on a single line, therefore, the cost is 2 * <b>changeTime</b> + <i>journey-time</i>.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td>If multiple lines pass through a station, you will find out about delays on all of these lines when you are in the station.</td>
    </tr>
    <tr>
     <td colspan="2">&nbsp;</td>
    </tr>
    <tr>
     <td colspan="2"><h3>Constraints</h3></td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td><b>lines</b> will contain between 1 and 8 elements, inclusive.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td><b>times</b> and <b>probabilities</b> will contain the same number of elements as lines.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td>Each element of <b>lines</b> and <b>times</b> will contain no more than 50 characters.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td>Each element of <b>lines</b> will be a space-separated list of integers, without leading zeros, containing at least 2 integers.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td>Each integer in <b>lines</b> will be between 0 and 39, inclusive.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td>Each element of <b>times</b> will be a space-separated list of integers, without leading zeros, containing exactly 1 fewer integer than the corresponding element of <b>lines</b>.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td>Each integer in <b>times</b> will be between 1 and 100, inclusive.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td>Each element of <b>probabilities</b> will be between 0 and 100, inclusive.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td><b>changeTime</b> will be between 1 and 100, inclusive.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td><b>delay</b> will be between 1 and 100, inclusive.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td><b>start</b> and <b>destination</b> will be distinct and will correspond to stations in <b>lines</b>.</td>
    </tr>
    <tr>
     <td colspan="2">&nbsp;</td>
    </tr>
    <tr>
     <td colspan="2"><h3>Examples</h3></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">0)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>0</pre></td>
            </tr>
            <tr>
             <td><pre>7</pre></td>
            </tr>
            <tr>
             <td><pre>{&quot;0 1 2 3 4 5 6 7&quot;}</pre></td>
            </tr>
            <tr>
             <td><pre>{&quot;2 2 2 2 2 2 2&quot;}</pre></td>
            </tr>
            <tr>
             <td><pre>{50}</pre></td>
            </tr>
            <tr>
             <td><pre>5</pre></td>
            </tr>
            <tr>
             <td><pre>5</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: 41.5</pre></td>
        </tr>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td colspan="2"><img src="http://www.topcoder.com/contest/problem/MetroNetwork/Example0.gif" /> <br /><br /> This network is shown topologically in the above diagram. In this diagram and all subsequent ones, station numbers are shown in bold numerals and segment times are shown italicized. When there is a possibility of a line being delayed, this segment time is formatted &quot;<i>non-delayed time/delayed time</i>&quot;, quotes for clarity. <br /><br /><br /><br /> Here there is a single line, so no choice as to which route to take. If the line is not delayed then the journey time is<br /><br /> <tt>5 + 2 + 2 + 2 + 2 + 2 + 2 + 2 + 5 = 24</tt><br /><br /> If the line is delayed, the time is<br /><br /> <tt>5 + 7 + 7 + 7 + 7 + 7 + 7 + 7 + 5 = 59</tt><br /><br /> For a total expected journey time of<br /><br /> <tt>0.5 * 24 + 0.5 * 59 = 41.5</tt></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">1)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>0</pre></td>
            </tr>
            <tr>
             <td><pre>3</pre></td>
            </tr>
            <tr>
             <td><pre>{&quot;0 1&quot;,&quot;0 2&quot;,&quot;1 3&quot;,&quot;2 3&quot;}</pre></td>
            </tr>
            <tr>
             <td><pre>{&quot;5&quot;,&quot;5&quot;,&quot;5&quot;,&quot;5&quot;}</pre></td>
            </tr>
            <tr>
             <td><pre>{0,0,50,50}</pre></td>
            </tr>
            <tr>
             <td><pre>5</pre></td>
            </tr>
            <tr>
             <td><pre>20</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: 40.0</pre></td>
        </tr>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td colspan="2"><img src="http://www.topcoder.com/contest/problem/MetroNetwork/Example1.gif" /><br /><br /> This network is shown above. Here you have 2 choices: you can either travel to station 1 on line zero, then change to line 2, or travel to station 2 on line 1 and change to line 3. Lines 0 and 1 are never delayed and lines 2 and 3 are delayed 50% of the time. Since you cannot tell from station 0 which of lines 2 and 3, if either, are delayed, and both of the journey times are otherwise the same, you just pick one of the choices at random. You will end up having to travel on a delayed line 50% of the time. </td>
            </tr>
           </tbody>
          </table></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">2)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>0</pre></td>
            </tr>
            <tr>
             <td><pre>3</pre></td>
            </tr>
            <tr>
             <td><pre>{&quot;0 1&quot;,&quot;0 2&quot;,&quot;0 1 3&quot;,&quot;2 3&quot;}</pre></td>
            </tr>
            <tr>
             <td><pre>{&quot;5&quot;,&quot;5&quot;,&quot;100 5&quot;,&quot;5&quot;}</pre></td>
            </tr>
            <tr>
             <td><pre>{0,0,50,50}</pre></td>
            </tr>
            <tr>
             <td><pre>5</pre></td>
            </tr>
            <tr>
             <td><pre>20</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: 35.0</pre></td>
        </tr>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td colspan="2"><img src="http://www.topcoder.com/contest/problem/MetroNetwork/Example2.gif" /><br /><br /> This is the same network as example 1, except line 2 has been extended to station 0 (see diagram). The time to travel on the additional segment is way too long for you to ever bother travelling on it, but it means that line 2 passes through station 0, so you know from the start whether or not it is delayed. The optimal strategy is now to consider whether line 2 is delayed from the start at station 0. If it is, then travel to station 1 on line 0 and then to station 3 on line 2. Otherwise you should take the other route via station 2. This strategy ensures that you will only travel on a delayed line if both lines 2 and 3 are delayed (25% probability), thus leading to a reduction in the expected journey time.</td>
            </tr>
           </tbody>
          </table></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">3)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>0</pre></td>
            </tr>
            <tr>
             <td><pre>4</pre></td>
            </tr>
            <tr>
             <td><pre>{&quot;0 1 2 3&quot;,&quot;1 3 4&quot;,&quot;2 4&quot;}</pre></td>
            </tr>
            <tr>
             <td><pre>{&quot;10 10 20&quot;,&quot;100 10&quot;,&quot;80&quot;}</pre></td>
            </tr>
            <tr>
             <td><pre>{0,50,0}</pre></td>
            </tr>
            <tr>
             <td><pre>5</pre></td>
            </tr>
            <tr>
             <td><pre>100</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: 105.0</pre></td>
        </tr>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td colspan="2"><img src="http://www.topcoder.com/contest/problem/MetroNetwork/Example3.gif" /><br /><br /> This network is shown above. Here, the optimal strategy is to travel to station 1 on line 0 and get off purely to check whether line 1 is delayed or not. If it is, then travel to station 2 on line 0, then station 4 on line 2. Otherwise travel to station 3 on line 0 and then to station 4 on line 1.</td>
            </tr>
           </tbody>
          </table></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">4)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>12</pre></td>
            </tr>
            <tr>
             <td><pre>9</pre></td>
            </tr>
            <tr>
             <td><pre>{&quot;0 30 1 2 3 4 31 5 6 7&quot;,
&quot;38 6 8 32 9 33 10 34 11 0 12 13 14 15 16 36 5 38&quot;,
&quot;17 39 18 19 5 8 9 20 21&quot;,
&quot;17 39 22 16 23 24 3 25 20 21&quot;,
&quot;28 9 20 25 2 27 14 17&quot;,
&quot;12 13 27 26 24 4 9 28&quot;,
&quot;29 10 1 27 15 22 19&quot;,
&quot;11 10 2 26 23 16 22 18&quot;}</pre></td>
            </tr>
            <tr>
             <td><pre>{&quot;3 3 2 3 2 3 2 2 5&quot;,
&quot;2 1 3 4 3 2 4 2 4 5 1 4 4 2 4 5 4&quot;,
&quot;2 4 4 2 2 6 2 4&quot;,
&quot;2 8 2 1 1 2 3 1 6&quot;,
&quot;6 1 2 2 2 2 6&quot;,
&quot;1 7 1 2 2 4 8&quot;,
&quot;7 2 3 2 2 4&quot;,
&quot;4 4 2 2 1 2 9&quot;}</pre></td>
            </tr>
            <tr>
             <td><pre>{20,5,15,50,45,5,10,5}</pre></td>
            </tr>
            <tr>
             <td><pre>3</pre></td>
            </tr>
            <tr>
             <td><pre>10</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: 23.228506624999994</pre></td>
        </tr>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td colspan="2"></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">5)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>0</pre></td>
            </tr>
            <tr>
             <td><pre>3</pre></td>
            </tr>
            <tr>
             <td><pre>{&quot;0 1&quot;,&quot;2 3&quot;}</pre></td>
            </tr>
            <tr>
             <td><pre>{&quot;2&quot;,&quot;2&quot;}</pre></td>
            </tr>
            <tr>
             <td><pre>{50,50}</pre></td>
            </tr>
            <tr>
             <td><pre>5</pre></td>
            </tr>
            <tr>
             <td><pre>5</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: -1.0</pre></td>
        </tr>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td colspan="2">There is no route to the destination here.</td>
            </tr>
           </tbody>
          </table></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">6)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>31</pre></td>
            </tr>
            <tr>
             <td><pre>8</pre></td>
            </tr>
            <tr>
             <td><pre>{&quot;35 38 1 3 4 7 9 10 12 14 16 18 19 20 21 24 25 26&quot;
,&quot;7 10 11 13 15 16 19 22 23 25 26 27 30 33 35 38 1&quot;
,&quot;35 38 1 3 5 6 9 11 13 16 17 19 22 25 26 29 30 32&quot;
,&quot;24 26 28 29 32 34 37 39 1 4 6 8 11 13 16 17 18 19&quot;
,&quot;13 15 17 20 22 25 26 29 30 32 35 37 0 2 3 6 7 8&quot;
,&quot;20 22 24 26 29 31 32 33 36 38 0 3 6 8 9 12 13 14&quot;
,&quot;12 15 16 18 19 21 22 24 25 26 28 30 31 32 33 35&quot;
,&quot;32 34 37 38 39 0 2 4 7 9 12 15 17 20 22 23 24 27&quot;}</pre></td>
            </tr>
            <tr>
             <td><pre>{&quot;2 4 9 9 4 4 2 9 7 5 8 3 3 6 7 4 1&quot;
,&quot;1 6 6 8 8 10 7 1 8 10 9 8 9 3 3 2&quot;
,&quot;2 2 7 9 9 1 9 7 9 6 4 4 1 1 10 2 3&quot;
,&quot;10 10 6 5 1 9 9 6 10 5 4 7 5 3 1 2 2&quot;
,&quot;5 1 3 9 2 5 5 6 5 6 3 5 8 8 5 1 6&quot;
,&quot;4 10 4 1 7 1 9 3 5 3 6 9 2 10 3 9 7&quot;
,&quot;9 3 6 6 6 3 5 6 10 10 2 2 5 2 6&quot;
,&quot;1 7 3 6 1 10 2 1 7 4 7 9 7 10 7 3 2&quot;}</pre></td>
            </tr>
            <tr>
             <td><pre>{81,5,54,32,6,12,80,38}</pre></td>
            </tr>
            <tr>
             <td><pre>4</pre></td>
            </tr>
            <tr>
             <td><pre>88</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: 56.38865447903488</pre></td>
        </tr>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td colspan="2"></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
   </tbody>
  </table>
 </body>
</html>