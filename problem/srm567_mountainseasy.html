<html>
 <head>
  <title>MountainsEasy Problem Statement</title>
 </head>
 <body>
  <table>
   <tbody>
    <tr>
     <td colspan="2"><h3><a href="http://community.topcoder.com/stat?c=problem_statement&amp;pm=12380">Problem Statement for MountainsEasy</a></h3></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>Manao is developing a simple 2-D computer game. The screen of the game is H pixels high and W pixels wide (1 &lt;= H, W &lt;= 50). <br /><br /><br /><br /> Manao is currently working on the background which should be filled with several mountains. The contents of the screen are stored in an array of characters <tt>pix</tt> where <tt>pix</tt>[x, y] gives the contents of the pixel at column x, row y. Both indices are 0-based. Columns are numbered left to right and rows are numbered bottom to top. Character 'X' denotes a part of a mountain and character '.' means that this pixel is not covered by any mountains. <br /><br /><br /><br /> Manao wants to draw <b>N</b> mountains in order to achieve the necessary background. The i-th (0-based index) mountain is described by its peak position (X[i], Y[i]), 0 &lt;= X[i] &lt; W, 0 &lt;= Y[i] &lt; H. In order to draw the mountains, the following pseudocode is used: <br /><br /><br /><br /> <tt>Fill all elements of pix with '.' characters.</tt><br /><br /> <tt>For 0 </tt>&lt;=<tt> i </tt>&lt;<tt> N:</tt><br /><br /> <tt>&nbsp;&nbsp;For 0 </tt>&lt;=<tt> x </tt>&lt;<tt> W:</tt><br /><br /> <tt>&nbsp;&nbsp;&nbsp;&nbsp;For 0 </tt>&lt;=<tt> y </tt>&lt;=<tt> Y[i] - |x - X[i]|:</tt><br /><br /> <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pix[x, y] := 'X'</tt><br /><br /> <br /><br /> For example, consider three mountains with peaks at (1, 1), (2, 2) and (4, 1). Once these mountains are drawn on a screen with H = 3, W = 6, the resulting picture will look as follows: <pre>
..X...
.XXXX.
XXXXXX
</pre> <br /><br /> You are given a String[] <b>picture</b> describing the background which Manao wants to obtain. It contains H elements and each element contains W characters. The required value of <tt>pix</tt>[x, y] is given by x-th character of <b>picture</b>[H-y-1]. In other words, elements of <b>picture</b> list the rows of the screen from top to bottom. You are also given an int <b>N</b>. Count the number of sequences S of exactly <b>N</b> mountains such that when you draw all mountains from S on the screen as described above, the result will match the given <b>picture</b>. Return this number modulo 1,000,000,009. <br /><br /><br /><br /> Note that the order of mountains in a sequence is important. Sequences containing the same mountains, but in a different order, are distinct. It is guaranteed that there exists at least one way to obtain the given <b>picture</b> by drawing exactly <b>N</b> mountains.</td>
    </tr>
    <tr>
     <td colspan="2">&nbsp;</td>
    </tr>
    <tr>
     <td colspan="2"><h3>Definition</h3></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>Class:</td>
         <td>MountainsEasy</td>
        </tr>
        <tr>
         <td>Method:</td>
         <td>countPlacements</td>
        </tr>
        <tr>
         <td>Parameters:</td>
         <td>String[], int</td>
        </tr>
        <tr>
         <td>Returns:</td>
         <td>int</td>
        </tr>
        <tr>
         <td>Method signature:</td>
         <td>int countPlacements(String[] picture, int N)</td>
        </tr>
        <tr>
         <td colspan="2">(be sure your method is public)</td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
    </tr>
    <tr>
     <td></td>
    </tr>
    <tr>
     <td colspan="2">&nbsp;</td>
    </tr>
    <tr>
     <td colspan="2"><h3>Constraints</h3></td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td><b>picture</b> will contain between 1 and 50 elements, inclusive.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td>Each element of <b>picture</b> will be between 1 and 50 characters long, inclusive.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td>All elements of <b>picture</b> will be of the same length.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td>Each element of <b>picture</b> will consist of 'X' and '.' characters only.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td><b>N</b> will be between 1 and 50, inclusive.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td><b>picture</b> can be obtained by drawing exactly <b>N</b> mountains according to the rules given in the problem statement.</td>
    </tr>
    <tr>
     <td colspan="2">&nbsp;</td>
    </tr>
    <tr>
     <td colspan="2"><h3>Examples</h3></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">0)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>{&quot;X.&quot;,
 &quot;XX&quot;}</pre></td>
            </tr>
            <tr>
             <td><pre>1</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: 1</pre></td>
        </tr>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td colspan="2">This is a mountain (0, 1).</td>
            </tr>
           </tbody>
          </table></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">1)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>{&quot;X.&quot;,
 &quot;XX&quot;}</pre></td>
            </tr>
            <tr>
             <td><pre>2</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: 5</pre></td>
        </tr>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td colspan="2">Here one of the mountains is completely covered by the other. The five possible sequences are: 
              <ul> 
               <li>(0, 1), (0, 1)</li> 
               <li>(0, 1), (0, 0)</li> 
               <li>(0, 1), (1, 0)</li> 
               <li>(0, 0), (0, 1)</li> 
               <li>(1, 0), (0, 1)</li> 
              </ul></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">2)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>{&quot;X.X&quot;,
 &quot;XXX&quot;}</pre></td>
            </tr>
            <tr>
             <td><pre>2</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: 2</pre></td>
        </tr>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td colspan="2">The two possible sequences are: 
              <ul> 
               <li>(0, 1), (2, 1) </li> 
               <li>(2, 1), (0, 1) </li> 
              </ul> </td>
            </tr>
           </tbody>
          </table></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">3)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>{&quot;X.X&quot;,
 &quot;XXX&quot;}</pre></td>
            </tr>
            <tr>
             <td><pre>3</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: 24</pre></td>
        </tr>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td colspan="2"></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">4)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>{&quot;......&quot;,
 &quot;X..X..&quot;,
 &quot;XXXXXX&quot;,
 &quot;XXXXXX&quot;}</pre></td>
            </tr>
            <tr>
             <td><pre>3</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: 6</pre></td>
        </tr>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td colspan="2">There are three mountains (0, 2), (3, 2), (5, 1) placed in any order.</td>
            </tr>
           </tbody>
          </table></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">5)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>{&quot;......&quot;,
 &quot;X..X..&quot;,
 &quot;XXXXXX&quot;,
 &quot;XXXXXX&quot;}</pre></td>
            </tr>
            <tr>
             <td><pre>4</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: 300</pre></td>
        </tr>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td colspan="2"></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">6)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>{&quot;....X...X..&quot;,
 &quot;...XXX.XXX.&quot;,
 &quot;XXXXXXXXXXX&quot;}</pre></td>
            </tr>
            <tr>
             <td><pre>10</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: 764632413</pre></td>
        </tr>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td colspan="2"></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
   </tbody>
  </table>
 </body>
</html>