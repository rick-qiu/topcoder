<html>
 <head>
  <title>InfiniteLab Problem Statement</title>
 </head>
 <body>
  <table>
   <tbody>
    <tr>
     <td colspan="2"><h3><a href="http://community.topcoder.com/stat?c=problem_statement&amp;pm=11231">Problem Statement for InfiniteLab</a></h3></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>There is an infinite labyrinth somewhere on Earth. It has an infinite number of rows, a fixed number W of columns and consists of 1x1 cells. Each cell can be in one of three states: free cell with a teleport, free cell without a teleport and blocked cell. It is known that each row in the labyrinth contains either 0 or 2 cells with teleports.<br /><br /><br /><br /> The rows and columns of the labyrinth are numbered using integers. The rows are infinite in both directions, so for every integer i (including negative integers) there's a row numbered i. The columns are numbered 0 to W-1, inclusive. A cell in row <i>i</i> and column <i>j</i> is denoted as <i>(i,j)</i>.<br /><br /><br /><br /> If you are located in a free cell <i>(i,j)</i>, you can perform one of the following actions: 
      <ul> 
       <li>Walk to another free cell <i>(x,y)</i> adjacent by side to <i>(i,j)</i>. In other words, <i>(x,y)</i> must be such that |i-x| + |j-y| = 1. It is impossible to walk outside of the labyrinth.</li> 
       <li>If cell <i>(i,j)</i> contains a teleport, you can use it to be transferred to another free cell from the same row that contains a teleport (there's always exactly one such cell). Note that when you are located in a cell with a teleport, it isn't necessary to use the teleport.</li> 
      </ul> Each of the described two actions, that is, walking to an adjacent cell and using a teleport, counts as one move.<br /><br /><br /><br /> You are given a String[] <b>map</b> containing H rows, with each element consisting of W characters. The character <i>j</i> in element <i>i</i> of <b>map</b> represents the state of cell <i>(i,j)</i>, where '#' means a blocked cell, '.' means a free cell and 'T' means a free cell with a teleport. Both indices <i>i</i> and <i>j</i> are 0-based, so <b>map</b> describes the states of all cells in rows 0 to H-1, inclusive. For all other cells the following rule applies: the state of cell <i>(i,j)</i> is exactly the same as the state of cell <i>(x,j)</i> if |i-x| is divisible by H. In other words, the given pattern of H rows is repeated an infinite number of times.<br /><br /><br /><br /> Return the minimum number of moves needed to get from cell (<b>r1</b>,<b>c1</b>) to cell (<b>r2</b>,<b>c2</b>). If it is impossible, return -1. </td>
    </tr>
    <tr>
     <td colspan="2">&nbsp;</td>
    </tr>
    <tr>
     <td colspan="2"><h3>Definition</h3></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>Class:</td>
         <td>InfiniteLab</td>
        </tr>
        <tr>
         <td>Method:</td>
         <td>getDistance</td>
        </tr>
        <tr>
         <td>Parameters:</td>
         <td>String[], long, int, long, int</td>
        </tr>
        <tr>
         <td>Returns:</td>
         <td>long</td>
        </tr>
        <tr>
         <td>Method signature:</td>
         <td>long getDistance(String[] map, long r1, int c1, long r2, int c2)</td>
        </tr>
        <tr>
         <td colspan="2">(be sure your method is public)</td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
    </tr>
    <tr>
     <td></td>
    </tr>
    <tr>
     <td colspan="2">&nbsp;</td>
    </tr>
    <tr>
     <td colspan="2"><h3>Notes</h3></td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td>The start and finish cells (<b>r1</b>,<b>c1</b>) and (<b>r2</b>,<b>c2</b>) are guaranteed to be distinct free cells.</td>
    </tr>
    <tr>
     <td colspan="2">&nbsp;</td>
    </tr>
    <tr>
     <td colspan="2"><h3>Constraints</h3></td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td><b>map</b> will contain between 1 and 20 elements, inclusive.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td>Each element of <b>map</b> will contain between 1 and 20 characters, inclusive.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td>All elements of <b>map</b> will contain the same number of characters.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td>Each character in <b>map</b> will be either '#', '.' or 'T'.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td>Each element of <b>map</b> will contain either 0 or 2 'T' characters.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td><b>r1</b> and <b>r2</b> will each be between -10^15 and 10^15, inclusive. </td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td><b>c1</b> and <b>c2</b> will each be between 0 and W-1, inclusive, where W is the number of characters in each element of <b>map</b>. </td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td>Cells (<b>r1</b>,<b>c1</b>) and (<b>r2</b>,<b>c2</b>) will both be free cells.</td>
    </tr>
    <tr>
     <td align="center" valign="top">-</td>
     <td>Cells (<b>r1</b>,<b>c1</b>) and (<b>r2</b>,<b>c2</b>) will be distinct.</td>
    </tr>
    <tr>
     <td colspan="2">&nbsp;</td>
    </tr>
    <tr>
     <td colspan="2"><h3>Examples</h3></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">0)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>{&quot;#...##&quot;,
 &quot;.##...&quot;,
 &quot;..#.##&quot;,
 &quot;#.#.##&quot;}</pre></td>
            </tr>
            <tr>
             <td><pre>1</pre></td>
            </tr>
            <tr>
             <td><pre>0</pre></td>
            </tr>
            <tr>
             <td><pre>5</pre></td>
            </tr>
            <tr>
             <td><pre>3</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: 7</pre></td>
        </tr>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td colspan="2">The optimal path is drawn below. Here 'S' means the start cell, 'F' means the finish cell and 'P' means an intermediate cell. <pre>
#...##
S##...
PP#.##
#P#.##
#PPP##
.##F..
..#.##
#.#.##
</pre> Note that the labyrinth is infinite, so only its part with rows 0 to 7, inclusive, is shown here and in subsequent examples.</td>
            </tr>
           </tbody>
          </table></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">1)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>{&quot;##.#.&quot;,
 &quot;.#T#T&quot;,
 &quot;...#.&quot;,
 &quot;##.#.&quot;}</pre></td>
            </tr>
            <tr>
             <td><pre>7</pre></td>
            </tr>
            <tr>
             <td><pre>4</pre></td>
            </tr>
            <tr>
             <td><pre>1</pre></td>
            </tr>
            <tr>
             <td><pre>0</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: 9</pre></td>
        </tr>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td colspan="2"><pre>
##.#.
F#T#T
PPP#.
##P#.
##P#.
.#T#T
...#P
##.#S
</pre> Here we need to use a teleport once.</td>
            </tr>
           </tbody>
          </table></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">2)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>{&quot;..######.#&quot;,
 &quot;.###T###.T&quot;,
 &quot;..T#.##T##&quot;,
 &quot;.######..#&quot;}</pre></td>
            </tr>
            <tr>
             <td><pre>1</pre></td>
            </tr>
            <tr>
             <td><pre>0</pre></td>
            </tr>
            <tr>
             <td><pre>6</pre></td>
            </tr>
            <tr>
             <td><pre>4</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: 11</pre></td>
        </tr>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td colspan="2"><pre>
..######.#
S###T###.T
PPT#.##T##
.######PP#
..######P#
.###T###PT
..T#F##T##
.######..#
</pre> Here we need to use a teleport twice.</td>
            </tr>
           </tbody>
          </table></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">3)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>{&quot;..#..&quot;,
 &quot;.#.#.&quot;,
 &quot;.....&quot;}</pre></td>
            </tr>
            <tr>
             <td><pre>-29</pre></td>
            </tr>
            <tr>
             <td><pre>2</pre></td>
            </tr>
            <tr>
             <td><pre>19</pre></td>
            </tr>
            <tr>
             <td><pre>2</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: 54</pre></td>
        </tr>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td colspan="2"></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
    <tr>
     <td align="center" nowrap="true">4)</td>
     <td></td>
    </tr>
    <tr>
     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
     <td>
      <table>
       <tbody>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td><pre>{&quot;.#.#.&quot;,
 &quot;..#..&quot;,
 &quot;.....&quot;,
 &quot;.....&quot;,
 &quot;..#..&quot;}</pre></td>
            </tr>
            <tr>
             <td><pre>-999</pre></td>
            </tr>
            <tr>
             <td><pre>3</pre></td>
            </tr>
            <tr>
             <td><pre>100</pre></td>
            </tr>
            <tr>
             <td><pre>2</pre></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
        <tr>
         <td><pre>Returns: -1</pre></td>
        </tr>
        <tr>
         <td>
          <table>
           <tbody>
            <tr>
             <td colspan="2"></td>
            </tr>
           </tbody>
          </table></td>
        </tr>
       </tbody>
      </table></td>
    </tr>
   </tbody>
  </table>
 </body>
</html>